var k=Object.defineProperty;var w=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var S=(e,t,a)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[t]=a,P=(e,t)=>{for(var a in t||(t={}))B.call(t,a)&&S(e,a,t[a]);if(w)for(var a of w(t))L.call(t,a)&&S(e,a,t[a]);return e};import{c as p,r as b,j as s}from"./react-DG-fLc2n.js";import{c as h}from"./recharts-Bj1gY5UL.js";import{b as F,c as R,T as $,t as _,a as q}from"./index-C5DeNR8b.js";import{b as Q}from"./react-query-E58jM38U.js";import{u as D,b as H,g as I}from"./api-factory-28S0Rw7F.js";import{C,S as N}from"./index-TNw-9F5i.js";import{e as K,f as V}from"./heroicons-CBbK1C7t.js";import"./lodash-euh3i8aB.js";import"./react-dom-Ck4m6P7c.js";import"./app-DWkGtBKQ.js";import"../index.js";const T="/account/info",z=()=>{const e=p.c(5),t=D(`${T}`),a=H();let l;e[0]!==t||e[1]!==a?(l=I(t,{queryKey:[`${T}`,...a]}),e[0]=t,e[1]=a,e[2]=l):l=e[2];let c;return e[3]!==l?(c=P({},l),e[3]=l,e[4]=c):c=e[4],Q(c)},E=e=>{const t=p.c(14),{type:a,strategy:l,symbol:c}=e;let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=h("flex","flex-col-reverse","md:flex-row","md:justify-between","md:pr-4","text-sm","md:items-center"),t[0]=n):n=t[0];let r;t[1]!==a?(r=a==="long"?s.jsx(K,{className:"size-4 text-green-500"}):s.jsx(V,{className:"size-4 text-red-500"}),t[1]=a,t[2]=r):r=t[2];let i;t[3]!==l?(i=s.jsx("span",{className:"text-xs font-semibold md:text-sm",children:l}),t[3]=l,t[4]=i):i=t[4];let o;t[5]!==r||t[6]!==i?(o=s.jsxs("div",{className:"flex items-center gap-1",children:[r,i]}),t[5]=r,t[6]=i,t[7]=o):o=t[7];let m;t[8]===Symbol.for("react.memo_cache_sentinel")?(m=h("text-xs","pl-2 md:pl-0"),t[8]=m):m=t[8];let f;t[9]!==c?(f=s.jsx("div",{children:s.jsx("span",{className:m,children:c})}),t[9]=c,t[10]=f):f=t[10];let x;return t[11]!==o||t[12]!==f?(x=s.jsxs("div",{className:n,children:[o,f]}),t[11]=o,t[12]=f,t[13]=x):x=t[13],x},M=[{td:e=>s.jsx(E,{strategy:e.strategy,symbol:e.symbol,type:e.type}),th:s.jsx("div",{className:"text-left",children:"Strategy"})},{td:e=>s.jsx("div",{className:"text-right text-sm",children:e.volume}),th:s.jsx("div",{className:"text-right",children:"Vol."})},{td:e=>{const[t,a]=q(e.open_time);return s.jsxs("div",{className:"text-left text-sm",children:[t," ",a]})},th:s.jsx("div",{className:"text-left",children:"Date"})},{td:e=>s.jsx("div",{className:"text-right",children:_(e.profit+e.swap)}),th:s.jsx("div",{className:"text-right",children:"Profit"}),tdProps:{className:e=>h(e.profit+e.swap>0?"text-green-600":"text-red-700","font-semibold","text-sm")}}],O=[{td:e=>s.jsx(E,{strategy:e.strategy_key,symbol:e.broker_symbol,type:e.order_type}),th:"Strategy",thProps:{className:"text-left"}},{td:e=>s.jsx("div",{className:"text-right text-sm",children:e.volume}),th:"Vol.",thProps:{className:"text-right"},tdProps:{className:()=>"text-right text-sm"}},{td:e=>e.status,tdProps:{className:()=>"text-left"},thProps:{className:"text-left"},th:"Status"},{td:e=>s.jsx("div",{children:e.trace}),th:s.jsx("div",{children:"Reason"})}],G=e=>{const t=p.c(6),{positions:a}=e,l=a.reduce(X,0);let c,n;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=h("grid","grid-cols-[min-content_1fr_max-content]","gap-4","items-center"),n=s.jsx("span",{className:h("row-1","text-lg","font-black"),children:"Positions"}),t[0]=c,t[1]=n):(c=t[0],n=t[1]);let r;t[2]!==l?(r=l>0&&s.jsx("div",{className:h("flex","flex-row-reverse md:flex-col","w-max","items-center","gap-3 md:gap-1","font-semibold","py-1","px-1 md:px-4",l===0&&"text-shadow-primary-950",l>0&&"bg-green-300/10 text-green-300",l<0&&"bg-red-300/10 text-red-300"),children:s.jsx("span",{className:"md:text-md text-sm",children:l===0?"-":_(l)})}),t[2]=l,t[3]=r):r=t[3];let i;return t[4]!==r?(i=s.jsxs("div",{className:c,children:[n,r]}),t[4]=r,t[5]=i):i=t[5],i},J=()=>{const e=p.c(11),{refetch:t}=z(),{refetch:a}=F(),{refetch:l}=R(),[c,n]=b.useState(0);let r,i;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{const g=setInterval(()=>{n(Y)},80);return()=>clearInterval(g)},i=[],e[0]=r,e[1]=i):(r=e[0],i=e[1]),b.useEffect(r,i);let o,m;e[2]!==c||e[3]!==t||e[4]!==a||e[5]!==l?(o=()=>{c==100&&(t(),a(),l())},m=[c,t,a,l],e[2]=c,e[3]=t,e[4]=a,e[5]=l,e[6]=o,e[7]=m):(o=e[6],m=e[7]),b.useEffect(o,m);let f;e[8]===Symbol.for("react.memo_cache_sentinel")?(f=h("w-full","h-2","bg-primary-900","mt-[-2px]","transition-all","ease-out"),e[8]=f):f=e[8];const x=`${c}%`;let d;return e[9]!==x?(d=s.jsx("div",{className:f,style:{width:x}}),e[9]=x,e[10]=d):d=e[10],d},U=b.memo(J),W=()=>{var v;const e=p.c(27),{data:t,isPending:a,isFetching:l}=F(),{data:c}=R();if(a){let y;return e[0]===Symbol.for("react.memo_cache_sentinel")?(y=s.jsx(N,{className:"mx-auto my-4"}),e[0]=y):y=e[0],y}let n;e[1]!==t?(n=t!=null?t:[],e[1]=t,e[2]=n):n=e[2];let r;e[3]!==n?(r=s.jsx(G,{positions:n}),e[3]=n,e[4]=r):r=e[4];let i;e[5]!==l?(i=l&&s.jsx("div",{className:"absolute top-0 left-0 z-10 flex h-full w-full items-center justify-center bg-white/50",children:s.jsx(N,{})}),e[5]=l,e[6]=i):i=e[6];let o;e[7]===Symbol.for("react.memo_cache_sentinel")?(o=s.jsx(U,{}),e[7]=o):o=e[7];let m;e[8]!==t?(m=t!=null?t:[],e[8]=t,e[9]=m):m=e[9];let f;e[10]!==m?(f=s.jsx($,{data:m,config:M,wrapperClassName:"max-h-[500px] overflow-auto",paginate:!0}),e[10]=m,e[11]=f):f=e[11];let x;e[12]!==l||e[13]!==(t==null?void 0:t.length)?(x=!l&&(t==null?void 0:t.length)===0&&s.jsx("div",{className:"p-2 text-center text-lg font-semibold text-red-600",children:"No data"}),e[12]=l,e[13]=t==null?void 0:t.length,e[14]=x):x=e[14];let d;e[15]!==r||e[16]!==i||e[17]!==f||e[18]!==x?(d=s.jsxs(C,{header:r,children:[i,o,f,x]}),e[15]=r,e[16]=i,e[17]=f,e[18]=x,e[19]=d):d=e[19];let g;e[20]===Symbol.for("react.memo_cache_sentinel")?(g=s.jsx("div",{className:"my-4"}),e[20]=g):g=e[20];let u;e[21]!==l||e[22]!==c?(u=((v=c==null?void 0:c.length)!=null?v:0)>0&&s.jsxs(C,{header:s.jsx("span",{className:h("row-1","text-lg","font-black"),children:"Pending Positions"}),children:[l&&s.jsx("div",{className:"absolute top-0 left-0 z-10 flex h-full w-full items-center justify-center bg-white/50",children:s.jsx(N,{})}),s.jsx($,{data:c!=null?c:[],config:O,wrapperClassName:"max-h-[500px] overflow-auto",paginate:!0})]}),e[21]=l,e[22]=c,e[23]=u):u=e[23];let j;return e[24]!==d||e[25]!==u?(j=s.jsxs("section",{children:[d,g,u]}),e[24]=d,e[25]=u,e[26]=j):j=e[26],j};function X(e,t){return e+t.profit+t.swap}function Y(e){return e===100?0:e+1}const A=e=>{const t=p.c(12),{title:a,value:l}=e;let c,n;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=h("bg-brand-500","rounded-lg","text-center"),n=h("py-2","px-4","bg-brand-600","rounded-t-lg","font-semibold","text-white"),t[0]=c,t[1]=n):(c=t[0],n=t[1]);let r;t[2]!==a?(r=s.jsx("div",{className:n,children:a}),t[2]=a,t[3]=r):r=t[3];let i;t[4]===Symbol.for("react.memo_cache_sentinel")?(i=h("py-2","px-4","font-semibold","text-white","text-lg"),t[4]=i):i=t[4];let o;t[5]!==l?(o=_(l),t[5]=l,t[6]=o):o=t[6];let m;t[7]!==o?(m=s.jsx("div",{className:i,children:o}),t[7]=o,t[8]=m):m=t[8];let f;return t[9]!==r||t[10]!==m?(f=s.jsxs("div",{className:c,children:[r,m]}),t[9]=r,t[10]=m,t[11]=f):f=t[11],f},fe=()=>{const e=p.c(10),{data:t}=z(),a=t==null?void 0:t.current_capital;let l;e[0]!==a?(l=s.jsx(A,{title:"Account Balance",value:a}),e[0]=a,e[1]=l):l=e[1];const c=t==null?void 0:t.floating_capital;let n;e[2]!==c?(n=s.jsx(A,{title:"Floating Balance",value:c}),e[2]=c,e[3]=n):n=e[3];let r;e[4]!==l||e[5]!==n?(r=s.jsxs("div",{className:"mb-4 flex gap-3 pl-2",children:[l,n]}),e[4]=l,e[5]=n,e[6]=r):r=e[6];let i;e[7]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx(W,{}),e[7]=i):i=e[7];let o;return e[8]!==r?(o=s.jsxs("div",{children:[r,i]}),e[8]=r,e[9]=o):o=e[9],o};export{fe as default};
