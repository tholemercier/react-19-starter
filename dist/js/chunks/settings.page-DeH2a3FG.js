var Z=Object.defineProperty,ee=Object.defineProperties;var te=Object.getOwnPropertyDescriptors;var O=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable;var R=(t,e,l)=>e in t?Z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l,$=(t,e)=>{for(var l in e||(e={}))le.call(e,l)&&R(t,l,e[l]);if(O)for(var l of O(e))se.call(e,l)&&R(t,l,e[l]);return t},w=(t,e)=>ee(t,te(e));import{c as m,j as s,r as u}from"./react-DG-fLc2n.js";import{c as x}from"./recharts-Bj1gY5UL.js";import{S as T,C as L}from"./index-TNw-9F5i.js";import{u as re,a as M,b as z,c as ne,S as I,I as E}from"./use-strategy-config-BKbJTso8.js";import{u as F,b as ae,g as oe,a as U}from"./api-factory-28S0Rw7F.js";import{g as ie,h as ce,i as de}from"./heroicons-CBbK1C7t.js";import{a as ue}from"./react-use-gEYxd92k.js";import{b as me,u as V}from"./react-query-E58jM38U.js";import"./lodash-euh3i8aB.js";import"./react-dom-Ck4m6P7c.js";import"./app-DWkGtBKQ.js";import"../index.js";const S="/system-config",be=()=>{const t=m.c(5),e=F(S),l=ae();let n;t[0]!==e||t[1]!==l?(n=oe(e,{queryKey:[S,...l]}),t[0]=e,t[1]=l,t[2]=n):n=t[2];let r;return t[3]!==n?(r=$({},n),t[3]=n,t[4]=r):r=t[4],me(r)};function q(t){const e=m.c(8);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={method:"POST"},e[0]=l):l=e[0];const n=F(S,l);let r;e[1]!==n?(r=async d=>n(d),e[1]=n,e[2]=r):r=e[2];const a=r;let o;e[3]!==t?(o={onSuccess:t},e[3]=t,e[4]=o):o=e[4];const i=U(S,o);let c;return e[5]!==i||e[6]!==a?(c={onSuccess:i,mutationFn:a},e[5]=i,e[6]=a,e[7]=c):c=e[7],V(c)}function Q(t,e){const l=m.c(8);let n;l[0]===Symbol.for("react.memo_cache_sentinel")?(n={method:"PUT"},l[0]=n):n=l[0];const r=F(`${S}/${t.key}`,n);let a;l[1]!==r?(a=async b=>r(b),l[1]=r,l[2]=a):a=l[2];const o=a;let i;l[3]!==e?(i={onSuccess:e},l[3]=e,l[4]=i):i=l[4];const c=U(S,i);let d;return l[5]!==c||l[6]!==o?(d={onSuccess:c,mutationFn:o},l[5]=c,l[6]=o,l[7]=d):d=l[7],V(d)}function fe(t,e){const l=m.c(8);let n;l[0]===Symbol.for("react.memo_cache_sentinel")?(n={method:"DELETE"},l[0]=n):n=l[0];const r=F(`${S}/${t.key}`,n);let a;l[1]!==r?(a=async()=>r(),l[1]=r,l[2]=a):a=l[2];const o=a;let i;l[3]!==e?(i={onSuccess:e},l[3]=e,l[4]=i):i=l[4];const c=U(S,i);let d;return l[5]!==c||l[6]!==o?(d={onSuccess:c,mutationFn:o},l[5]=c,l[6]=o,l[7]=d):d=l[7],V(d)}const G=t=>{const e=m.c(3),{children:l}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=x("p-2","bg-primary-400","text-white","mb-4","w-max","rounded-xs","font-semibold"),e[0]=n):n=e[0];let r;return e[1]!==l?(r=s.jsx("div",{className:n,children:l}),e[1]=l,e[2]=r):r=e[2],r},p=t=>{const e=m.c(5),{children:l,className:n}=t;let r;e[0]!==n?(r=x(n),e[0]=n,e[1]=r):r=e[1];let a;return e[2]!==l||e[3]!==r?(a=s.jsx("td",{className:r,children:l}),e[2]=l,e[3]=r,e[4]=a):a=e[4],a},C=t=>{const e=m.c(6),{children:l,className:n,thProps:r}=t;let a;e[0]!==n?(a=x("rounded-xs","bg-primary-700","py-1","pl-2","font-semibold","text-white",n),e[0]=n,e[1]=a):a=e[1];let o;return e[2]!==l||e[3]!==a||e[4]!==r?(o=s.jsx("th",w($({},r),{className:a,children:l})),e[2]=l,e[3]=a,e[4]=r,e[5]=o):o=e[5],o},xe=(t,e,l)=>x("cursor-pointer","rounded-sm","border-1","p-0","px-[0.8em]","py-[8px]","align-middle","leading-[1.15385]",t==="error"&&"border-red-800",t==="error"&&"bg-red-400",t==="error"&&"text-red-800",t==="error"&&"hover:bg-red-500",t==="error"&&"hover:text-red-950",t==="success"&&"border-green-800",t==="success"&&"bg-green-400",t==="success"&&"text-green-800",t==="success"&&"hover:bg-green-500",t==="success"&&"hover:text-green-950",t==="brand"&&"border-brand-800",t==="brand"&&"bg-brand-400",t==="brand"&&"text-brand-800",t==="brand"&&"hover:bg-brand-500",t==="brand"&&"hover:text-brand-950",e&&"opacity-15",l),K=t=>{const e=m.c(8),{variant:l,disabled:n,children:r,onClick:a,className:o}=t;let i;e[0]!==o||e[1]!==n||e[2]!==l?(i=xe(l,n,o),e[0]=o,e[1]=n,e[2]=l,e[3]=i):i=e[3];let c;return e[4]!==r||e[5]!==a||e[6]!==i?(c=s.jsx("button",{onClick:a,className:i,children:r}),e[4]=r,e[5]=a,e[6]=i,e[7]=c):c=e[7],c},ge=t=>{const e=m.c(6),{children:l,isOpen:n,className:r}=t;if(!n)return null;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=x("fixed","top-[50%]","left-[50%]","z-50","h-screen","w-full","translate-x-[-50%]","translate-y-[-50%]","bg-[rgba(0,0,0,0.4)]"),e[0]=a):a=e[0];let o;e[1]!==r?(o=x("absolute","top-[20%]","left-[50%]","w-max","max-w-[1200px]","translate-x-[-50%]","translate-y-[-20%]","rounded-md","bg-primary-100","px-6","py-4",r),e[1]=r,e[2]=o):o=e[2];let i;return e[3]!==l||e[4]!==o?(i=s.jsx("div",{className:a,children:s.jsx("div",{className:o,children:l})}),e[3]=l,e[4]=o,e[5]=i):i=e[5],i},he=t=>{const e=m.c(2),{children:l}=t;let n;return e[0]!==l?(n=s.jsx("h2",{className:"mb-6 text-2xl font-semibold",children:l}),e[0]=l,e[1]=n):n=e[1],n},B=({config:t,useCreateConfig:e,useUpdateConfig:l,data:n,toggleIsOpen:r,isOpen:a,isCreate:o=!1})=>{const i=u.useMemo(()=>{const h={};for(const[N,D]of Object.entries(t))h[N]=D.value(n);return h},[t,n]),[c,d]=u.useState(i);u.useEffect(()=>{n&&d(n)},[n]);const b=u.useCallback(h=>{const{name:N,value:D}=h.currentTarget;d(Y=>w($({},Y),{[N]:D}))},[]),y=u.useCallback(()=>{d(i),r()},[i,r]),g=e(),f=l(i),k=u.useCallback(async()=>{await(o?g.mutateAsync(c):f.mutateAsync(c)),d(i),r()},[g,c,i,o,r,f]),v=f.isPending||g.isError,_=f.isError||g.isError,H=u.useMemo(()=>Object.entries(t),[t]);return s.jsxs(ge,{isOpen:a,className:x("w-xl"),children:[s.jsx(he,{children:"Update Config"}),s.jsxs("div",{className:"mb-6 flex flex-col gap-4",children:[H.map(([h,N])=>s.jsx(u.Fragment,{children:N.renderInput(h,N,c,o,b)},h)),!v&&_&&s.jsxs("div",{className:"pl-2 font-semibold text-red-700",children:["Unable to ",o?"create":"update"," the Config"]})]}),s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[f.isPending?s.jsx(T,{}):s.jsx(K,{variant:"brand",onClick:k,disabled:!o&&!c,children:o?"Create":"Update"}),s.jsx(K,{variant:"error",onClick:y,children:"Cancel"})]})]})},pe=(t,e)=>x("size-8","md:size-10","cursor-pointer","p-1","md:p-2",t==="success"&&"hover:bg-green-200",t==="error"&&"hover:bg-red-200",t==="brand"&&"hover:bg-brand-200",e),Ce={error:"var(--color-red-700)",success:"var(--color-green-700)",brand:"var(--color-brand-700)"},J=t=>{const e=m.c(8),{as:l,onClick:n,className:r,variant:a}=t,o=l;let i;e[0]!==r||e[1]!==a?(i=pe(a,r),e[0]=r,e[1]=a,e[2]=i):i=e[2];const c=Ce[a];let d;return e[3]!==o||e[4]!==n||e[5]!==i||e[6]!==c?(d=s.jsx(o,{className:i,fill:c,onClick:n}),e[3]=o,e[4]=n,e[5]=i,e[6]=c,e[7]=d):d=e[7],d},je=({useDelete:t,d:e})=>{const l=t(e),n=u.useCallback(()=>l.mutateAsync(),[l]);return s.jsx(J,{as:ce,variant:"error",onClick:n})},W=t=>{const e=m.c(21),{data:l,tableConfig:n,onEditClick:r,useDelete:a}=t;let o;e[0]!==n?(o=Object.entries(n),e[0]=n,e[1]=o):o=e[1];const i=o;let c;e[2]!==r?(c=v=>()=>r(v),e[2]=r,e[3]=c):c=e[3];const d=c;let b;e[4]===Symbol.for("react.memo_cache_sentinel")?(b=x("mb-4","w-full","border-separate"),e[4]=b):b=e[4];let y;e[5]!==i?(y=s.jsx("thead",{children:s.jsx("tr",{children:i.map(ye)})}),e[5]=i,e[6]=y):y=e[6];let g;if(e[7]!==l||e[8]!==i||e[9]!==d||e[10]!==a){let v;e[12]!==i||e[13]!==d||e[14]!==a?(v=(_,H)=>s.jsxs("tr",{children:[i.map(h=>{const[N,D]=h;return s.jsx(u.Fragment,{children:D.renderColCell(_)},N)}),s.jsx("td",{className:"w-[1%]",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx(J,{variant:"brand",as:ie,onClick:d(_)}),s.jsx(je,{d:_,useDelete:a})]})})]},H),e[12]=i,e[13]=d,e[14]=a,e[15]=v):v=e[15],g=l.map(v),e[7]=l,e[8]=i,e[9]=d,e[10]=a,e[11]=g}else g=e[11];let f;e[16]!==g?(f=s.jsx("tbody",{children:g}),e[16]=g,e[17]=f):f=e[17];let k;return e[18]!==y||e[19]!==f?(k=s.jsxs("table",{className:b,children:[y,f]}),e[18]=y,e[19]=f,e[20]=k):k=e[20],k};function ye(t){const[e,l]=t;return s.jsx(u.Fragment,{children:l.renderColHead()},e)}const X=t=>{const e=m.c(12),{config:l,useCreateConfig:n,useUpdateConfig:r}=t,[a,o]=ue(!1);let i;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx(de,{className:"size-7",fill:"var(--color-green-700)"}),e[0]=i):i=e[0];let c;e[1]!==o?(c=s.jsx("div",{className:"flex justify-end",children:s.jsx(K,{variant:"success",onClick:o,children:i})}),e[1]=o,e[2]=c):c=e[2];let d;e[3]!==l||e[4]!==a||e[5]!==o||e[6]!==n||e[7]!==r?(d=s.jsx(B,{useCreateConfig:n,useUpdateConfig:r,isOpen:a,toggleIsOpen:o,config:l,isCreate:!0}),e[3]=l,e[4]=a,e[5]=o,e[6]=n,e[7]=r,e[8]=d):d=e[8];let b;return e[9]!==c||e[10]!==d?(b=s.jsxs(s.Fragment,{children:[c,d]}),e[9]=c,e[10]=d,e[11]=b):b=e[11],b},ve=x("flex","items-center","rounded-md","border-2","border-primary-500","bg-primary-100","p-2","font-semibold","text-primary-800"),j=t=>{const e=m.c(5),{className:l,children:n}=t;let r;e[0]!==l?(r=x(ve,l),e[0]=l,e[1]=r):r=e[1];let a;return e[2]!==n||e[3]!==r?(a=s.jsx("div",{className:r,children:n}),e[2]=n,e[3]=r,e[4]=a):a=e[4],a},P={strategy_key:{value:t=>{var e;return(e=t==null?void 0:t.strategy_key)!=null?e:""},renderColHead:()=>s.jsx(C,{children:"Key"}),renderColCell:t=>s.jsx(p,{className:"hidden md:table-cell",children:s.jsx(j,{children:t.strategy_key})}),renderInput:(t,e,l,n,r)=>s.jsx(E,{label:"Strategy Key",type:"text",value:e.value(l),name:t,onChange:r,placeholder:"Strategy Key"})},platform:{mobileHidden:!0,value:t=>{var e;return(e=t==null?void 0:t.platform)!=null?e:""},renderColHead:()=>s.jsx(C,{children:"Platform"}),renderColCell:t=>s.jsx(p,{className:"hidden md:table-cell",children:s.jsx(j,{children:t.platform})}),renderInput:(t,e,l,n,r)=>s.jsx(I,{name:t,onChange:r,defaultValue:e.value(l),label:"Platform",options:[{label:"MT5",value:"MT5"},{label:"IR",value:"IR"},{label:"KRAKEN",value:"KRAKEN"},{label:"IB",value:"IB"}]})},broker_symbol:{mobileHidden:!0,value:t=>{var e;return(e=t==null?void 0:t.broker_symbol)!=null?e:""},renderColHead:()=>s.jsx(C,{children:"Broker Symbol"}),renderColCell:t=>s.jsx(p,{className:"hidden md:table-cell",children:s.jsx(j,{children:t.broker_symbol})}),renderInput:(t,e,l,n,r)=>s.jsx(E,{label:"Broker Symbol",type:"text",value:e.value(l),name:t,onChange:r,placeholder:"Broker Symbol"})},positioning:{mobileHidden:!0,value:t=>{var e;return(e=t==null?void 0:t.positioning)!=null?e:""},renderColHead:()=>s.jsx(C,{children:"Positioning"}),renderColCell:t=>s.jsx(p,{className:"hidden md:table-cell",children:s.jsx(j,{children:t.positioning})}),renderInput:(t,e,l,n,r)=>s.jsx(I,{name:t,onChange:r,defaultValue:e.value(l),label:"Positioning",options:[{label:"Long",value:"long"},{label:"Short",value:"short"}]})},email_subject:{mobileHidden:!0,value:t=>{var e;return(e=t==null?void 0:t.email_subject)!=null?e:""},renderColHead:()=>s.jsx(C,{children:"Email Subject"}),renderColCell:t=>s.jsx(p,{className:"hidden md:table-cell",children:s.jsx(j,{children:t.email_subject})}),renderInput:(t,e,l,n,r)=>s.jsx(E,{label:"Email Subject",type:"text",value:e.value(l),name:t,onChange:r,placeholder:"Email Subject"})},volume:{mobileHidden:!0,value:t=>{var e;return(e=t==null?void 0:t.volume)!=null?e:0},renderColHead:()=>s.jsx(C,{children:"Volume"}),renderColCell:t=>s.jsx(p,{className:"hidden md:table-cell",children:s.jsx(j,{children:t.volume})}),renderInput:(t,e,l,n,r)=>s.jsx(E,{label:"Volume",type:"number",step:.1,value:e.value(l),name:t,onChange:r,placeholder:"Volume"})},enabled:{mobileHidden:!0,value:t=>{var e;return(e=t==null?void 0:t.enabled)!=null?e:""},renderColHead:()=>s.jsx(C,{children:"Enabled"}),renderColCell:t=>s.jsx(p,{className:"hidden md:table-cell",children:s.jsx(j,{children:t.enabled?"Enabled":"Disabled"})}),renderInput:(t,e,l,n,r)=>s.jsx(I,{name:t,onChange:r,defaultValue:e.value(l),label:"Enabled",options:[{label:"Enabled",value:"1"},{label:"Disabled",value:"0"}]})}},Ne=()=>{const{data:t=[],isPending:e,isError:l}=re(),[n,r]=u.useState(),a=u.useCallback(o=>r(o),[]);return s.jsxs(L,{header:"Strategy Config",children:[l&&s.jsx(G,{children:"An error occured when retrieving the Strategy Config."}),e?s.jsx(T,{className:"mx-auto my-4"}):s.jsxs(s.Fragment,{children:[s.jsx(B,{useCreateConfig:z,useUpdateConfig:M,data:n,isOpen:!!n,toggleIsOpen:a,config:P}),s.jsx(W,{useDelete:ne,tableConfig:P,data:t,onEditClick:a}),s.jsx(X,{config:P,useCreateConfig:z,useUpdateConfig:M})]})]})},A={key:{renderColHead:()=>s.jsx(C,{children:"Key"}),renderColCell:t=>s.jsx(p,{className:"hidden md:table-cell",children:s.jsx(j,{children:t.key})}),value:t=>{var e;return(e=t==null?void 0:t.key)!=null?e:""},renderInput:(t,e,l,n,r)=>s.jsx(E,{label:"Key",disabled:!n,type:"text",value:e.value(l),name:t,onChange:r,placeholder:"Key"})},value:{mobileHidden:!0,value:t=>{var e;return(e=t==null?void 0:t.value)!=null?e:""},renderColHead:()=>s.jsx(C,{children:"Value"}),renderColCell:t=>s.jsx(p,{className:"hidden md:table-cell",children:s.jsx(j,{children:t.key.includes("enabled")?t.value==="1"?"Enabled":"Disabled":t.value})}),renderInput:(t,e,l,n,r)=>l.key.includes("enabled")?s.jsx(I,{name:t,onChange:r,defaultValue:e.value(l),label:"Enabled",options:[{label:"Enabled",value:"1"},{label:"Disabled",value:"0"}]}):s.jsx(E,{label:"Value",type:"text",value:e.value(l),name:t,onChange:r,placeholder:"Value"})}},Se=()=>{const{data:t=[],isPending:e,isError:l}=be(),[n,r]=u.useState(),a=u.useCallback(o=>r(o),[]);return s.jsxs(L,{header:"System Config",children:[l&&s.jsx(G,{children:"An error occured when retrieving the System Config."}),e?s.jsx(T,{className:"mx-auto my-4"}):s.jsxs(s.Fragment,{children:[!!n&&s.jsx(B,{useCreateConfig:q,useUpdateConfig:Q,data:n,isOpen:!0,toggleIsOpen:a,config:A}),s.jsx(W,{useDelete:fe,tableConfig:A,data:t,onEditClick:a}),s.jsx(X,{config:A,useCreateConfig:q,useUpdateConfig:Q})]})]})},Ue=()=>{const t=m.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=s.jsxs("div",{className:x("py-8"),children:[s.jsx(Se,{}),s.jsx(Ne,{})]}),t[0]=e):e=t[0],e};export{Ue as default};
