var ee=Object.defineProperty,te=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var V=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var X=(s,e,t)=>e in s?ee(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,K=(s,e)=>{for(var t in e||(e={}))re.call(e,t)&&X(s,t,e[t]);if(V)for(var t of V(e))ae.call(e,t)&&X(s,t,e[t]);return s},M=(s,e)=>te(s,se(e));import{r as le}from"./lodash-euh3i8aB.js";import{c as T,r as B,j as o}from"./react-DG-fLc2n.js";import{b as U}from"./react-query-E58jM38U.js";import{u as W,g as Z,b as z,d as ne}from"./api-factory-28S0Rw7F.js";import{c as E}from"./recharts-Bj1gY5UL.js";const _e=(s=0)=>Intl.NumberFormat("en-EN",{style:"currency",currency:"USD"}).format(le(s,2)),h="/positions",ve=(s,e)=>{const t=T.c(10);let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=[],t[0]=r):r=t[0];const a=B.useRef(r);let n=`${h}/history`;s&&e&&(n=`${h}/history?from=${s}&to=${e}`);const i=W(n),c=Z(i,{queryKey:[`${h}/history`,{from:s,to:e},...z()]});let m;t[1]===Symbol.for("react.memo_cache_sentinel")?(m=()=>a.current,t[1]=m):m=t[1];let p;t[2]!==c?(p=M(K({},c),{placeholderData:m}),t[2]=c,t[3]=p):p=t[3];const l=U(p);let y;t[4]!==l.data||t[5]!==l.isError||t[6]!==l.isFetching?(y=()=>{var x;a.current=!l.isFetching&&l.isError?[]:(x=l.data)!=null?x:[]},t[4]=l.data,t[5]=l.isError,t[6]=l.isFetching,t[7]=y):y=t[7];let u;return t[8]!==l?(u=[l],t[8]=l,t[9]=u):u=t[9],B.useEffect(y,u),l},De=()=>{const s=T.c(5),e=W(`${h}/live`),t=z();let r;s[0]!==e||s[1]!==t?(r=Z(e,{queryKey:[`${h}/live`,...t]}),s[0]=e,s[1]=t,s[2]=r):r=s[2];let a;return s[3]!==r?(a=M(K({},r),{placeholderData:ce}),s[3]=r,s[4]=a):a=s[4],U(a)},Pe=()=>{const s=T.c(5),e=W(`${h}/pending`),t=z();let r;s[0]!==e||s[1]!==t?(r=Z(e,{queryKey:[`${h}/pending`,...t]}),s[0]=e,s[1]=t,s[2]=r):r=s[2];let a;return s[3]!==r?(a=M(K({},r),{placeholderData:oe}),s[3]=r,s[4]=a):a=s[4],U(a)};function ce(s){return s}function oe(s){return s}const ie={year:"numeric",month:"short",day:"numeric"},{toDateAndTime:me}=ne("Australia/Sydney"),Fe=(s,e=ie)=>{const[t,r]=me(s,{noMs:!0});return[new Date(t).toLocaleDateString("en-EN",e),r,new Date(t)]},de=s=>{const e=T.c(5),{children:t,className:r}=s;let a;e[0]!==r?(a=E("px-3 md:px-6","py-3",r),e[0]=r,e[1]=a):a=e[1];let n;return e[2]!==t||e[3]!==a?(n=o.jsx("th",{className:a,children:t}),e[2]=t,e[3]=a,e[4]=n):n=e[4],n},ue=s=>{const e=T.c(6),{children:t,h:r,className:a}=s,n=r&&"hidden lg:table-cell";let i;e[0]!==a||e[1]!==n?(i=E(n,"px-3 md:px-6","py-4",a),e[0]=a,e[1]=n,e[2]=i):i=e[2];let c;return e[3]!==t||e[4]!==i?(c=o.jsx("td",{className:i,children:t}),e[3]=t,e[4]=i,e[5]=c):c=e[5],c},Te=s=>{const e=T.c(46),{config:t,data:r,className:a,wrapperClassName:n,paginate:i}=s,c=i?Math.ceil(r.length/15):1,[m,p]=B.useState(1);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=()=>p(pe),e[0]=l):l=e[0];const y=l;let u;e[1]!==c?(u=()=>p(d=>Math.min(c,d+1)),e[1]=c,e[2]=u):u=e[2];const x=u;let L;e:{if(!i){L=r;break e}const d=(m-1)*15,F=d+15;let f;e[3]!==r||e[4]!==F||e[5]!==d?(f=r.slice(d,F),e[3]=r,e[4]=F,e[5]=d,e[6]=f):f=e[6],L=f}const Q=L;let q;e[7]!==t?(q=t.map(fe),e[7]=t,e[8]=q):q=e[8];const R=q;let S;if(e[9]!==t||e[10]!==Q){let d;e[12]!==t?(d=(F,f)=>o.jsx("tr",{className:E("border-b","border-primary-200","bg-primary-010","hover:bg-primary-020"),children:t.map((G,Y)=>{var k,J;return o.jsx(ue,{i:f,className:(J=(k=G.tdProps)==null?void 0:k.className)==null?void 0:J.call(k,F),children:G.td(F)},`td-${Y}`)})},`tr-${f}`),e[12]=t,e[13]=d):d=e[13],S=Q.map(d),e[9]=t,e[10]=Q,e[11]=S}else S=e[11];const H=S;let C;e[14]!==R||e[15]!==H?(C=[R,H],e[14]=R,e[15]=H,e[16]=C):C=e[16];const[I,O]=C;let b;e[17]!==n?(b=E("pb-8",n),e[17]=n,e[18]=b):b=e[18];let g;e[19]!==m||e[20]!==r||e[21]!==x||e[22]!==i||e[23]!==c?(g=i&&c>1&&o.jsxs("div",{className:"flex justify-end gap-2 p-1 pr-2 text-sm",children:[o.jsxs("div",{children:[r.length-1," rows"]}),o.jsx("button",{onClick:y,disabled:m===1,className:"rounded border px-2 disabled:opacity-50",children:"Prev"}),o.jsxs("span",{className:"",children:["Page ",m," / ",c]}),o.jsx("button",{onClick:x,disabled:m===c,className:"rounded border px-2 disabled:opacity-50",children:"Next"})]}),e[19]=m,e[20]=r,e[21]=x,e[22]=i,e[23]=c,e[24]=g):g=e[24];let N;e[25]!==a?(N=E("w-full","table-auto","h-full",a),e[25]=a,e[26]=N):N=e[26];let j;e[27]!==I?(j=I.map(he),e[27]=I,e[28]=j):j=e[28];let $;e[29]!==j?($=o.jsx("thead",{className:"sticky top-0 bg-primary-050 text-xs text-primary-800 uppercase",children:o.jsx("tr",{children:j})}),e[29]=j,e[30]=$):$=e[30];let _;e[31]!==O?(_=O.map(ye),e[31]=O,e[32]=_):_=e[32];let v;e[33]!==_?(v=o.jsx("tbody",{children:_}),e[33]=_,e[34]=v):v=e[34];let D;e[35]!==$||e[36]!==v||e[37]!==N?(D=o.jsxs("table",{className:N,children:[$,v]}),e[35]=$,e[36]=v,e[37]=N,e[38]=D):D=e[38];let P;e[39]!==D||e[40]!==b||e[41]!==g?(P=o.jsxs("div",{className:b,children:[g,D]}),e[39]=D,e[40]=b,e[41]=g,e[42]=P):P=e[42];let w;e[43]===Symbol.for("react.memo_cache_sentinel")?(w=o.jsx("div",{className:"pointer-events-none absolute right-0 bottom-0 left-0 h-16 bg-gradient-to-t from-white to-transparent"}),e[43]=w):w=e[43];let A;return e[44]!==P?(A=o.jsxs("div",{className:"relative",children:[P,w]}),e[44]=P,e[45]=A):A=e[45],A};function pe(s){return Math.max(1,s-1)}function fe(s,e){var t;return o.jsx(de,{className:(t=s.thProps)==null?void 0:t.className,children:s.th},`th-${e}`)}function he(s){return s}function ye(s){return s}export{Te as T,Fe as a,De as b,Pe as c,_e as t,ve as u};
